(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{365:function(t,s,e){"use strict";e.r(s);var a=e(43),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"chapter-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chapter-1"}},[t._v("#")]),t._v(" Chapter 1")]),t._v(" "),e("p",[t._v("This is an introduction to implicit accounts and key management in Tezos.")]),t._v(" "),e("p",[t._v("As you may know in Tezos there are currently two types of accounts: implicit and originated. In this chapter we will inspect the former type."),e("br"),t._v("\nImplicit account with some "),e("code",[t._v("tez")]),t._v(" (Tezos native tokens) is probably the first thing you will need to start working with Tezos."),e("br"),t._v("\nImplicit account is linked to a "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Public-key_cryptography",target:"_blank",rel:"noopener noreferrer"}},[t._v("public key"),e("OutboundLink")],1),t._v(", is always spendable and delegatable, cannot contain code nor reject a transaction."),e("br"),t._v("\nImplicit account address starts with "),e("code",[t._v("tz")]),t._v(" prefix.")]),t._v(" "),e("h2",{attrs:{id:"base58-encoding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#base58-encoding"}},[t._v("#")]),t._v(" Base58 encoding")]),t._v(" "),e("p",[t._v("Tezos uses a special encoding for various entities identified by raw bytes, e.g. block id, account id, operation id, etc. A common scheme is used for making such identifiers readable, distinguashable, concise, and non-ambiguous:")]),t._v(" "),e("ol",[e("li",[t._v("Prepend a predefined byte prefix (in some cases also a suffix) to the raw identifier;")]),t._v(" "),e("li",[t._v("Encode raw bytes using Base58 algorithm with checksum.")])]),t._v(" "),e("p",[t._v("Here is an example for an "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Elliptic-curve_cryptography",target:"_blank",rel:"noopener noreferrer"}},[t._v("EC"),e("OutboundLink")],1),t._v(" public key:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pytezos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encoding "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" base58_encodings\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" base58 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" b58encode_check\n\nbase58_encodings  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here is the list of all known entities used in PyTezos")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("[(b'B', 51, b'\\x014', 32, 'block hash'),\n (b'o', 51, b'\\x05t', 32, 'operation hash'),\n (b'Lo', 52, b'\\x85\\xe9', 32, 'operation list hash'),\n (b'LLo', 53, b'\\x1d\\x9fm', 32, 'operation list list hash'),\n (b'P', 51, b'\\x02\\xaa', 32, 'protocol hash'),\n (b'Co', 52, b'O\\xc7', 32, 'context hash'),\n (b'tz1', 36, b'\\x06\\xa1\\x9f', 20, 'ed25519 public key hash'),\n (b'tz2', 36, b'\\x06\\xa1\\xa1', 20, 'secp256k1 public key hash'),\n (b'tz3', 36, b'\\x06\\xa1\\xa4', 20, 'p256 public key hash'),\n (b'KT1', 36, b'\\x02Zy', 20, 'Originated address'),\n (b'id', 30, b'\\x99g', 16, 'cryptobox public key hash'),\n (b'expr', 54, b'\\r,@\\x1b', 32, 'script expression'),\n (b'edsk', 54, b'\\r\\x0f:\\x07', 32, 'ed25519 seed'),\n (b'edpk', 54, b'\\r\\x0f%\\xd9', 32, 'ed25519 public key'),\n (b'spsk', 54, b'\\x11\\xa2\\xe0\\xc9', 32, 'secp256k1 secret key'),\n (b'p2sk', 54, b'\\x10Q\\xee\\xbd', 32, 'p256 secret key'),\n (b'edesk', 88, b'\\x07Z<\\xb3)', 56, 'ed25519 encrypted seed'),\n (b'spesk', 88, b'\\t\\xed\\xf1\\xae\\x96', 56, 'secp256k1 encrypted secret key'),\n (b'p2esk', 88, b'\\t09s\\xab', 56, 'p256_encrypted_secret_key'),\n (b'sppk', 55, b'\\x03\\xfe\\xe2V', 33, 'secp256k1 public key'),\n (b'p2pk', 55, b'\\x03\\xb2\\x8b\\x7f', 33, 'p256 public key'),\n (b'SSp', 53, b'&\\xf8\\x88', 33, 'secp256k1 scalar'),\n (b'GSp', 53, b'\\x05\\\\\\x00', 33, 'secp256k1 element'),\n (b'edsk', 98, b'+\\xf6N\\x07', 64, 'ed25519 secret key'),\n (b'edsig', 99, b'\\t\\xf5\\xcd\\x86\\x12', 64, 'ed25519 signature'),\n (b'spsig', 99, b'\\rse\\x13?', 64, 'secp256k1 signature'),\n (b'p2sig', 98, b'6\\xf0,4', 64, 'p256 signature'),\n (b'sig', 96, b'\\x04\\x82+', 64, 'generic signature'),\n (b'Net', 15, b'WR\\x00', 4, 'chain id')]")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("public_key_hex "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'419491b1796b13d756d394ed925c10727bca06e97353c5ca09402a9b6b07abcc'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Selecting raw prefix for ed25519 public key from the table above")]),t._v("\nb58encode_check"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'\\r\\x0f%\\xd9'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromhex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("public_key_hex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("b'edpku976gpuAD2bXyx1XGraeKuCo1gUZ3LAJcHM12W1ecxZwoiu22R'")])]),t._v(" "),e("p",[t._v("That's how string identifiers derived from the raw data in a nutshell."),e("br"),t._v("\nOf course, you don't have to do it manually, you can use PyTezos helpers for that:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pytezos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encoding "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" base58_encode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" base58_decode\n\nbase58_encode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromhex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("public_key_hex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prefix"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'edpk'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("b'edpku976gpuAD2bXyx1XGraeKuCo1gUZ3LAJcHM12W1ecxZwoiu22R'")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("base58_decode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'edpku976gpuAD2bXyx1XGraeKuCo1gUZ3LAJcHM12W1ecxZwoiu22R'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'419491b1796b13d756d394ed925c10727bca06e97353c5ca09402a9b6b07abcc'")])]),t._v(" "),e("h2",{attrs:{id:"secret-key-public-key-public-key-hash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#secret-key-public-key-public-key-hash"}},[t._v("#")]),t._v(" Secret key, public key, public key hash")]),t._v(" "),e("p",[t._v("As was mentioned, implicit account is linked to a public key, but it would be more accurate to say that it's linked to a key pair (where public key can be derived from the secret key). Only the owner of the secret key can spend a particular implicit account, however anyone can check that spending is valid using the public key (which is by definition is accessible by everyone). The impicit account address, which is used for specifying the transaction destination, is derived from the public key using cryptographic hash function.")]),t._v(" "),e("p",[t._v("It's not possible to restore secret key from the public one (would take centuries)"),e("br"),t._v("\nIt's not possible to restore public key from the address (public key hash)")]),t._v(" "),e("p",[t._v("Here are few examples demonstrating the derivations:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pytezos"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crypto "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Key\n\nsk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_encoded_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'edsk3nM41ygNfSxVU4w1uAW3G9EnTQEB5rjojeZedLTGmiGRcierVv'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("public_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'edpku976gpuAD2bXyx1XGraeKuCo1gUZ3LAJcHM12W1ecxZwoiu22R'")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("sk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("public_key_hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'tz1eKkWU5hGtfLUiqNpucHrXymm83z3DG9Sq'")])]),t._v(" "),e("p",[t._v("However if you try to do inverse transform it will fail:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("pk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_encoded_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'edpku976gpuAD2bXyx1XGraeKuCo1gUZ3LAJcHM12W1ecxZwoiu22R'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\npk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"error"},[e("pre",[t._v("ValueError: Secret key is undefined")])]),t._v(" "),e("p",[t._v("PyTezos allows you to initialize a keypair using raw values or access them afterwards.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In this case (ed25519 curve) a seed is returned instead of a secret exponent")]),t._v("\nsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_exponent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'92542d866a5263115aa416fd3e1dce4ced35f5545417d1f73763f7093552a72b419491b1796b13d756d394ed925c10727bca06e97353c5ca09402a9b6b07abcc'")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("sk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("public_point"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hex")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Compact elliptic point format")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'419491b1796b13d756d394ed925c10727bca06e97353c5ca09402a9b6b07abcc'")])]),t._v(" "),e("h2",{attrs:{id:"multiple-elliptic-curves"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#multiple-elliptic-curves"}},[t._v("#")]),t._v(" Multiple elliptic curves")]),t._v(" "),e("p",[t._v("As you may already noticed, implicit account addresses can start with tz1, tz2, or tz3 — it depends on the chosen elliptic curve parameters.")]),t._v(" "),e("p",[e("code",[t._v("tz1")]),t._v(" — Ed25519, twisted Edwards curve, has very good properties in terms of implementation security and speed of digital signatures, currently one of the most perspective curves;"),e("br"),t._v(" "),e("code",[t._v("tz2")]),t._v(" — Secp256k1, defined in Standards for Efficient Cryptography, used in Bitcoin, Ethereum, and other cryptocurrencies, has a wide adoption and library support;"),e("br"),t._v(" "),e("code",[t._v("tz3")]),t._v(" — NIST P-256 (aka Secp256r1), one of the most used elliptic curves, natively supported on mobile devices as well as cloud HSMs.")]),t._v(" "),e("p",[t._v("The according Base58 prefixes:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Curve")]),t._v(" "),e("th",[t._v("Secret key")]),t._v(" "),e("th",[t._v("Public key")]),t._v(" "),e("th",[t._v("Public key hash")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Ed25519")]),t._v(" "),e("td",[t._v("edsk")]),t._v(" "),e("td",[t._v("edpk")]),t._v(" "),e("td",[t._v("tz1")])]),t._v(" "),e("tr",[e("td",[t._v("Secp256k1")]),t._v(" "),e("td",[t._v("spsk")]),t._v(" "),e("td",[t._v("sppk")]),t._v(" "),e("td",[t._v("tz2")])]),t._v(" "),e("tr",[e("td",[t._v("P-256")]),t._v(" "),e("td",[t._v("p2sk")]),t._v(" "),e("td",[t._v("p2pk")]),t._v(" "),e("td",[t._v("tz3")])])])]),t._v(" "),e("p",[t._v("You may also noticed that there are two variants of "),e("code",[t._v("edsk")]),t._v(" prefix: it depends on whether a Ed25519 seed (32 bytes) or a secret exponent (64 bytes, derived from the seed) is used. In Tezos it is seed that's mostly used.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("edsk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_encoded_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'edsk3nM41ygNfSxVU4w1uAW3G9EnTQEB5rjojeZedLTGmiGRcierVv'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nedsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ed25519_seed"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# returns full secret key")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'edskRwA8M7ZDQfRwt2bEUi2TxpbdDYYfLLYNHB8qMYX3kDD8srM5P4NDuMpkDk3oHFrxP4q6Yyw26t55TMQ7sbaKdKETpZtUyR'")])]),t._v(" "),e("p",[t._v("In all places where it is necessary, you can specify which curve to use, e.g.:")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("edpk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_public_point"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromhex"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'419491b1796b13d756d394ed925c10727bca06e97353c5ca09402a9b6b07abcc'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    curve"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'p2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nedpk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("public_key_hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'tz3f1mS1a8pnyiZtXox1GtHALhueLhbb7cAq'")])]),t._v(" "),e("h2",{attrs:{id:"encrypted-keys-and-commitments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#encrypted-keys-and-commitments"}},[t._v("#")]),t._v(" Encrypted keys and commitments")]),t._v(" "),e("p",[t._v("There is a standardized scheme for password encrypted secret keys based on PBKDF2, such encrypted keys have special encoding prefixes "),e("code",[t._v("edesk")]),t._v(", "),e("code",[t._v("spesk")]),t._v(", and "),e("code",[t._v("p2esk")]),t._v(" respectfully.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("edesk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_encoded_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'edesk1zxaPJkhNGSzgZDDSphvPzSNrnbmqes8xzUrw1wdFxdRT7ePiQz8D2Q18fMjn6fC9ZRS2rUbg8d8snxxznE'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    passphrase"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qqq'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nedesk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("passphrase"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qwerty'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'edesk1q4v8YyqrN1EPSnySoaDGcRByWZ4z4GnLB7xCnz99b8wLAo5eLLynupPG1cJNvT7K6yBgemb6x1L33rYAxh'")])]),t._v(" "),e("p",[t._v('Tezos genesis (first) block contains so called "commitments" (aka recomended allocations) it\'s how initial token distribution was conducted. In order to claim your tokens you need:')]),t._v(" "),e("ul",[e("li",[t._v("15-word mnemonic")]),t._v(" "),e("li",[t._v("email")]),t._v(" "),e("li",[t._v("password")]),t._v(" "),e("li",[t._v("activation code")])]),t._v(" "),e("p",[t._v("A similar mechnanism is used for granting tokens in public test networks: on a special "),e("a",{attrs:{href:"https://faucet.tzalpha.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("website"),e("OutboundLink")],1),t._v(" you can download a json file with all that fields."),e("br"),t._v("\nIn order to derive a secret key from that data one need to generate seed from mnemonic using concatenated email+password as passphrase, and then take first 32 bytes.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("sk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_mnemonic"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    mnemonic"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rather"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aware"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"school"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"often"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"area"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"quarter"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"story"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"note"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"goddess"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dream"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"winner"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scheme"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stairs"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clown"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    email"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vsvkfovl.lzzsalmj@tezos.example.org'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    passphrase"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8Rx7GLurGY'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("public_key_hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa'")])]),t._v(" "),e("h2",{attrs:{id:"generating-keys-and-signatures"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#generating-keys-and-signatures"}},[t._v("#")]),t._v(" Generating keys and signatures")]),t._v(" "),e("p",[t._v("PyTezos can also generate a new key for you, internally it first creates a mnemonic (which is by default stored on disk, just in case) and then derives a secret key from it.")]),t._v(" "),e("p",[t._v("Note, that you cannot restore a mnemonic from the secret key.")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("newsk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("generate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("curve"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'p2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" export"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnewsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'p2sk3zqDakap9bXEqsTr4sM93ZehELQNGCMX1MXmBsJUi29tFQYijV'")])]),t._v(" "),e("p",[t._v("Finally you can sign some arbitrary data with your secret key, or validate and existing signature with a public key. Note that there are four different encodings for the signatures depending on the curve: "),e("code",[t._v("edsig")]),t._v(", "),e("code",[t._v("spsig")]),t._v(", "),e("code",[t._v("p2sig")]),t._v(", and just "),e("code",[t._v("sig")]),t._v(" (generic, meaning not holding any info about the curve used).")]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("newsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'hello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'p2sigvTBnDjdDacJpSXjYZfsTtAijJb6DhNRcq3GdZq2gopsugVFV17C19h8EegAepyeEaixgB3Y4rG4qQZGhXTBE7P7C8R7MM'")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("newsk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'hello'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" generic"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"result"},[e("pre",[t._v("'sigw8xw8e587gGMWGyHr5LgNhwLuvrxbx1QPGRFANbPbNbN9DUAd46msWhwTjeRPn4uxhSf6objMJkU1sLxvzynqgmFctwwK'")])]),t._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[t._v("newpk "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_encoded_key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'spsk1zkqrmst1yg2c4xi3crWcZPqgdc9KtPtb9SAZWYHAdiQzdHy7j'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnewpk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("verify"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    signature"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'spsig1RriZtYADyRhyNoQMa6AiPuJJ7AUDcrxWZfgqexzgANqMv4nXs6qsXDoXcoChBgmCcn2t7Y3EkJaVRuAmNh2cDDxWTdmsz'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    message"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("b'test'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Verify method throws an exception in case signature is not valid, in our case everything is fine.")]),t._v(" "),e("Binder",{attrs:{filepath:"notebooks/01_key_management.ipynb"}})],1)}),[],!1,null,null,null);s.default=n.exports}}]);